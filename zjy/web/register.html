<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>注册</title>
    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet" type="text/css" media="all" />
    <script src="lib/ionic/js/ionic.bundle.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script src="js/script.js"></script>
</head>

<body ng-app="myApp">
    <!-- content -->
    <ion-content class=" scroll-content loginre">
        <div class="card">
            <div class="list">
                <label class="item item-input">
                    <i class="icon ion-android-phone-portrait placeholder-icon loginrei"></i>
                    <input type="tel" placeholder="请输入手机号">
                </label>
                <label class="item item-input">
                    <i class="icon ion-locked placeholder-icon loginrei"></i>
                    <input type="password" placeholder="请输入密码">
                </label>
                <div class="item item-input" ng-controller="smsController">
                    <i class="icon ion-paper-airplane placeholder-icon loginreii"></i>
                    <input type="text" placeholder="输入验证码">
                    <span class="sendmessage"><span class="{{smsClass}}" ng-click="sms()" ng-class=""  >{{text}}</span></span>
                </div>
                <div class="item item-text-wrap">
                    <a href="login.html">
                        <button type="" class="button button-block button-calm loginbutton">注&nbsp;&nbsp;册</button>
                    </a>
                </div>
                <div class="item item-text-wrap">
                    <span class="loginread">
                        <i class="icon ion-android-checkmark-circle placeholder-icon" ></i>
                        <span class="loginreads">我已经阅读并同意</span>
                    <a href="">《用户服务条款》</a>
                    </span>
                </div>
            </div>
        </div>
    </ion-content>
    <script>
    var app = angular.module("myApp", ["ionic"]);
    app.controller('smsController', ['$scope', '$interval', function($scope, $interval) {
        var iNow = 5;
        $scope.text = '发送验证码';
        $scope.smsClass = 'messagetext';
        var fash = false;
        $scope.sms = function() {
            if (fash == false) {
                $scope.text = iNow + '秒后重新发送';
                $scope.smsClass = 'messagetextnum';
                fash = true;
                var timer = $interval(function() {
                    iNow--;
                    $scope.text = iNow + '秒后重新发送';
                    if (iNow == 0) {
                        $interval.cancel(timer);
                        $scope.text = '重新发送';
                        fash = false;
                        $scope.smsClass = 'messagetext';
                        iNow = 5;
                    }
                }, 1000);
            }
        }
    }]);
    </script>
</body>

</html>
